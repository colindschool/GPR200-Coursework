// GLSL STARTER CODE BY DANIEL S. BUCKSTEIN
//  -> IMAGE TAB (final)

//------------------------------------------------------------
// SHADERTOY MAIN

// mainImage: process the current pixel (exactly one call per pixel)
//    fragColor: output final color for current pixel
//    fragCoord: input location of current pixel in image (in pixels)
void mainImage(out color4 fragColor, in sCoord fragCoord)
{
    // setup
    // test UV for input image
    sCoord uv = fragCoord / iChannelResolution[0].xy;
    
    // TESTING
    // set iChannel0 to 'Misc/Buffer A' and fetch sample
    
    vec4 blur = texture(iChannel0, uv);
    vec4 original = texture(iChannel1, uv);
    
    // COMPOSITE COLORS
    
    vec4 m = mix(original, blur, .1);
    
    fragColor = m;
    // Add the original and the blur together
    //fragColor = original + blur;
    
    fragColor = 1. - (1. - original) * (1. - blur);
    
}

// Bonuses
// Do the blur in multiple passes
// Break the blur into a horizontal and vertical pass
// In the example of a 3x3 kernal, it is a product of 2 1x3 kernals
// Add Buffer D samples from Buffer C (which is horizontally blurred)
// Order doesnt matter for kernals

// Sobel filter

// Custom cubemap
// Cubemap A tab
// Write your own cubemap and sample from that

// Sound
// Get a function with a respect to time and you can read that in