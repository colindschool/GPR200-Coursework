#version 300 es

#ifdef GL_ES
precision highp float;
#endif // GL_ES

layout (location = 0) out vec4 rtFragColor;

uniform sampler2D uTex;

in vec2 vTexcoord;
in vec2 vInvResolution;

vec4 blur5x5(in sampler2D tex, in vec2 center, in vec2 texelSize)
{
	float weight = 0.125;
	vec2 positive = vec2(center + 0.5 * texelSize);
	vec2 negative = vec2(center - positive);
	
	vec4 color = 3.0 * (texture(tex, positive) + texture(tex, negative));
	color + (texture(tex, positive += texelSize) + texture(tex, negative -= texelSize));
	color *= weight;
	return color;
}

void main()
{
	vec2 uv = vTexcoord * 0.5 + 0.5;
	vec4 col = blur5x5(uTex, uv, vec2(vInvResolution.x, 0.0));
	col += blur5x5(uTex, uv, vec2(0.0, vInvResolution.y));
	//col = texture(uTex, uv);
	rtFragColor = col;
}